<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <title>投票统计</title>
    <link rel="stylesheet" type="text/css" href="static/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="static/css/main.css" />
<!--[if lt IE 9]>
<script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
<script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<![endif]-->
</head>
<body class="layui-layout-body">
<!--[if lt IE 9]>
<p class="browser">您的浏览器版本过低，请使用chrome或者firefox等现代浏览器，请到<a href="http://browsehappy.osfipin.com/">这里</a>更新，以获取最佳体验</p>
<![endif]-->
<div class="layui-layout layui-layout-admin">
    <!-- 顶栏 -->
    <div class="layui-header head">
        <div class="layui-logo">
            <a class="logo" href="">
                <img src="static/images/logo.png" alt="某某">
                <span>某某用户中心</span>
            </a>
        </div>
        <ul class="layui-nav layui-layout-right top-right">
            <li class="layui-nav-item change-pwd"><a href="user-change-pwd.html">修改密码</a></li>
            <li class="layui-nav-item quit"><a href="#">退出账号</a></li>
        </ul>
    </div>
    <!-- 顶栏 -->

    <!-- 侧栏 -->
    <aside class="menu-side">
        <div class="user-status">
            <div class="u-name">
                一支穿云箭<span class="label">专业版</span>
            </div>
            <div class="u-money">
                账户金额：<em>96846.66</em>
            </div>
            <div class="u-expry-date">
                会员到期：2018-05-20 12:00
            </div>
            <div class="u-traffic">
                剩余流量：5006703次
            </div>
        </div>
        <div class="bundle-wrap">
            <a class="layui-btn layui-btn-normal" href="bundle.html">会员套餐</a>
        </div>
        <div class="navbox">
            <ul class="nav">
                <li>
                    <a class="nav-home" href="index.html" title="首页">
                        <i></i><span>首页</span>
                    </a>
                </li>
                <li>
                    <a class="nav-vote" href="voteSystem.html" title="投票系统">
                        <i></i>
                        <span>投票系统</span>
                    </a>
                </li>
                <li>
                    <a class="nav-new" href="addVote.html" title="新增投票">
                        <i></i>
                        <span>新增投票</span>
                    </a>
                </li>
                <li>
                    <a class="nav-msg" href="message.html" title="消息管理">
                        <i></i>
                        <span>消息管理<em class="badge">36</em></span>
                    </a>
                </li>
                <li>
                    <a class="nav-charge" href="charge.html" title="在线充值">
                        <i></i>
                        <span>在线充值</span>
                    </a>
                </li>
                <li>
                    <a class="nav-utype" href="userType.html" title="会员等级">
                        <i></i>
                        <span>会员等级</span>
                    </a>
                </li>
                <li>
                    <a class="nav-manage" href="iXpenselt.html" title="消费管理">
                        <i></i>
                        <span>消费管理</span>
                    </a>
                </li>
                <li>
                    <a class="nav-faq" href="faq.html" title="问题解答">
                        <i></i>
                        <span>问题解答</span>
                    </a>
                </li>
                <li>
                    <a class="nav-user" href="user.html" title="个人信息">
                        <i></i>
                        <span>个人信息</span>
                    </a>
                </li>
            </ul>
        </div>
        <div id="side-btn" class="side-btn"><i class="layui-icon layui-icon-prev"></i></div>
    </aside>
    <!-- 侧栏 -->

    <!-- 主要内容 -->
    <main class="main-content">
        <div class="content-box h100p vote-count-wrap">
            <div class="module-block">
                <div class="module-head btm-boder clearfix">
                    <div class="tit tit-count">
                        投票统计
                    </div>
                </div>
                <div class="count-stats clearfix">
                    <div class="stats-div votes">
                        <div class="cont">
                            <div class="num">64963793</div>
                            <p>总投票数</p>
                        </div>
                    </div>
                    <div class="stats-div visited">
                        <div class="cont">
                            <div class="num">1167845368</div>
                            <p>总访问数</p>
                        </div>
                    </div>
                    <div class="stats-div competitor">
                        <div class="cont">
                            <div class="num">32</div>
                            <p>总参与选手</p>
                        </div>
                    </div>
                    <div class="stats-div share">
                        <div class="cont">
                            <div class="num">4525/64235</div>
                            <p>朋友圈分享数 / 好友分享数</p>
                        </div>
                    </div>
                </div>
                <div class="chart-meta">
                    <div class="time">
                        统计时间<span class="ipt-wrap"><input type="text" id="selctTime" class="selcttime" placeholder="2018-05-29"><i class="layui-icon layui-icon-triangle-d"></i></span>
                    </div>
                    <span class="title g-font">2018西部制冷展人气王投票活动（每小时投票量）</span>
                    <div class="fr">
                        <div class="operate">
                            <button class="layui-btn layui-btn-primary layui-btn-xs" >打印图表<i class="layui-icon layui-icon-triangle-d"></i>
                            <ul class="table-filter">
                                <li><a class="savepng" href="javascript:;">保存为png</a></li>
                                <li><a class="savejpg" href="javascript:;">保存为jpeg</a></li>
                                <li><a class="savepdf" href="javascript:;">保存为pdf</a></li>
                                <li><a class="savesvg" href="javascript:;">保存为svg</a></li>
                            </ul>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="chart-cont">
                    <!-- <div id="echart-line" class="echart"></div> -->
                    <div id="container" style="width:100%; height:500px;"></div>
                </div>
            </div>
            
        </div>
    </main>
    <!-- 主要内容 -->

    <!-- 客服 -->
    <div class="fixed-service">
        <a class="btn-kf" href="javascript:;"></a>
    </div>
    <!-- 客服 -->
</div>

<script src="static/layui/layui.js"></script>
<script src="static/js/public.js"></script>
<!-- highcharts中文文档 https://api.hcharts.cn/highcharts -->
<script src="static/js/plugin/highcharts.js"></script>
<!-- <script src="static/js/plugin/exporting.js"></script>
<script src="static/js/plugin/offline-exporting.js"></script> -->

<!-- 需要保存导出功能模块文件是在 highcharts.js 之后引入 -->
<script src="http://cdn.hcharts.cn/highcharts/modules/exporting.js"></script>
<!-- 客户端导出功能模块为可选选项 -->
<script src="http://cdn.hcharts.cn/highcharts/modules/offline-exporting.js"></script>


<script type="text/javascript">
layui.use(['laydate','jquery'], function(){
    var laydate = layui.laydate,
    $ = layui.$;

    laydate.render({
        elem: '#selctTime' //指定元素
        ,theme: '#00aaff' // 主题
        ,format: 'yyyy-MM-dd'
        ,value: new Date() // 初始值
        ,isInitValue: true //允许填充初始值
        ,done: function () {
            getChartOption();
        }
    });

// 图表默认配置
var option = {
    title:{
        text:"每小时投票量",
        x:-20
    },
    subtitle:{
        text:"日期：2018年05月30日",
        x:-20
    },
    xAxis:{
        categories:["0:00","1:00","2:00","3:00","4:00","5:00","6:00","7:00","8:00","9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"]
    },
    yAxis:{
        min:0,
        lineWidth: 1,
        className: 'highcharts-color-0',
        title:{
            align: 'high',
            offset: 0,
            text:"投票数",
            rotation: 0,
            y: -10
        },
        plotLines:[{
            value:0,
            width:1,
            color:"#808080"
        }]
    },
    tooltip:{
        valueSuffix:"票",
        backgroundColor: '#fff',
        borderColor: '#e6e6e6',
        borderRadius: 5,
        borderWidth: 1,
        style: {
            padding: 0,
        },
        useHTML: true,
        formatter: function () {
            // console.log(this);
            var s = '<div class="tooltipTop">'+this.series.name + ': '+ this.x +' <span class="tooltipTxt">'+ this.y + '票</span></div>';
            return s;
        },
    },
    legend:{
        layout:"vertical",
        align:"right",
        verticalAlign:"middle",
        borderWidth:0
    },
    series:[{
        color: '#57a1c6',
        name:"2018-05-30",
        data:[234565,334565,364565,434565,484565,534565,234565,334565,364565,434565,484565,534565,234565,334565,364565,434565,484565,534565,234565,334565,364565,434565,484565,534565]
    }],
    navigation: {
        buttonOptions: {  // 关闭导出按钮
            enabled: false
        }
    }
}

var myChart = Highcharts.chart('container', option);

/* 
 * 导出图表
 * 浏览器兼容性 https://www.hcharts.cn/docs/client-side-export
 */
// 导出jpg
$('.operate .table-filter').find('.savejpg').click(function(){
    myChart.exportChartLocal({  // 本地导出
        type: 'image/jpeg',
        filename: 'chart'
    })
});
// 本地导出png
$('.operate .table-filter').find('.savepng').click(function(){
    myChart.exportChartLocal()
});
// 导出pdf 本地导出pdf有中文会乱码
$('.operate .table-filter').find('.savepdf').click(function(){
    myChart.exportChart({ // 服务器导出, 这里会出错
        type: 'application/pdf',
        filename: 'chart'
    })
});
// 本地导出svg
$('.operate .table-filter').find('.savesvg').click(function(){
    myChart.exportChartLocal({
        type: 'image/svg+xml',
        filename: 'chart'
    })
});

// 更新图表
function getChartOption(){
    // 获取日期
    var dateVal = $('#selctTime').val(); 
    // 取得日期后，获取对应的数据
    // 此处为模拟的
    var newData = {
        subtitle:{
            text:"日期：2018年05月31日",
            x:-20
        },
        series: [
            {name:"2018-05-31",
            data:[234565,334565,364565,434565,484565,534565,234565,334565,364565,434565,484565,534565,234565,334565,364565,434565,484565,534565,234565,334565,364565,434565,484565,534565]
            }
        ]
    }
    // 更新视图
    myChart.update(newData);
}


});
</script>
</body>
</html>