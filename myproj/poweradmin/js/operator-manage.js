var nodeId=0;layui.use(["laydate","table","layer","form"],function(){var l,e=layui.laydate,n=layui.table,i=layui.form;lay(".time-range").each(function(){e.render({elem:this,type:"datetime",format:"yyyy-MM-dd HH:mm",isInitValue:!0,range:!0,done:function(e){console.log(e)}})}),$(".select-time").each(function(){var e=$(this).parent().next(".select-date");e.children(".time-range");$(this).on("change",function(){$(this).is(":checked")?e.removeClass("tchide"):e.addClass("tchide")})}),$("#addStaff").click(function(){i.val("add-staff",{name:"",sex:"0",department:"",post:"",qq:"",telephone:""}),l=layer.open({type:1,id:"add_staff",skin:"layer-dialog",title:"新增操作人员",area:["800px","320px"],closeBtn:1,content:$(".add-staff"),yes:function(e,t){}})}),i.on("submit(*)",function(e){console.log("asdaaa"),layer.close(l)}),$("#batchDel").click(function(){layer.open({type:1,id:"batch_del",skin:"layer-dialog",title:"批量删除操作人员",btn:["提交","关闭"],btnAlign:"c",closeBtn:1,content:'<div style="padding: 20px 0;text-align:center;">确定要批量删除吗？</div>',yes:function(e,t){var a=n.checkStatus("staffTable");console.log(a.data)},btn2:function(e){layer.close(e)}})});n.render({id:"staffTable",elem:"#staffTable",page:{limit:10,layout:["prev","page","next","count"]},cols:[[{checkbox:!0},{field:"id",title:"序号",templet:'<div><span class="txel">{{d.id}}</span></div>'},{field:"name",title:"姓名",templet:'<div><span class="txel">{{d.name}}</span></div>'},{field:"sex",title:"性别",templet:'<div><span class="txel">{{d.sex}}</span></div>'},{field:"department",title:"部门",templet:'<div><span class="txel">{{d.department}}</span></div>'},{field:"post",title:"职务",templet:'<div><span class="txel">{{d.post}}</span></div>'},{field:"QQ",title:"QQ",templet:'<div><span class="txel">{{d.QQ}}</span></div>'},{field:"tel",title:"电话",templet:'<div><span class="txel">{{d.tel}}</span></div>'},{field:"long_time",title:"累积运维时间",templet:'<div><span class="txel">{{d.long_time}}</span></div>'},{field:"frequency",title:"累积运维次数",templet:'<div><span class="txel">{{d.frequency}}</span></div>'},{field:"operate",title:"操作",toolbar:"#toolbar"}]],data:[{id:1,name:"张三",sex:"男",department:"后勤",post:"老板",QQ:"2691261",tel:"13887838",long_time:"10",frequency:"22"},{id:2,name:"张四",sex:"男",department:"后勤2",post:"老板",QQ:"2691261",tel:"13887838",long_time:"10",frequency:"22"}],done:function(){}});n.on("tool(staffTable)",function(t){var a=t.data;console.log(a);var e=t.event;t.tr;"modify"===e?(layui.use("layer",function(){l=layer.open({type:1,id:"add_staff",skin:"layer-dialog",title:"修改操作人员",area:["800px","320px"],closeBtn:1,content:$(".add-staff"),yes:function(e,t){}})}),i.val("add-staff",{name:a.name,sex:a.sex,department:a.department,post:a.post,QQ:a.QQ,tel:a.tel})):"del"===e&&layer.confirm("真的要删除 "+a.name+" 吗?",{skin:"layer-dialog"},function(e){console.log(a.id),t.del(),layer.close(e)})});$("#tableLoading")});