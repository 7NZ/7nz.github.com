var nodeId=0,ajaxStime="",ajaxEtime="",themeConfig={colors:{chartBg:"transparent",axisLineC:"#ebeef0",xAxisLabelC:"#99a8bf",yAxisLabelC:"#4a4b56",legendC:"#333",legendC2:"#646487"}};$(function(){function e(e){for(var t=e[0],o=1;o<e.length;o++){var i=e[o];t<i&&(t=i)}return t}var t=echarts.init(document.getElementById("chart_1")),o=[["00:00",116],["00:30",129],["01:00",135],["01:30",186],["02:00",173],["02:30",85],["03:00",73],["02:30",68],["03:00",92],["03:30",130],["04:00",245],["04:30",139],["05:00",115],["05:30",111],["06:00",309],["06:30",206],["07:00",137],["07:30",128],["08:00",185],["08:30",294],["09:00",271],["09:30",106],["10:00",84],["10:30",93],["11:00",85],["11:30",73],["12:00",83],["12:30",125],["13:00",107],["13:30",182],["14:00",164],["14:30",122],["15:00",106],["15:30",107],["16:00",66],["16:30",91],["17:00",92],["17:30",113],["18:00",107],["18:30",131],["19:00",111],["19:30",64],["20:00",69],["20:30",88],["21:00",177],["21:30",183],["22:00",111],["22:30",157],["23:00",55],["23:30",60]],i=[["00:00",106],["00:30",120],["01:00",125],["01:30",116],["02:00",173],["02:30",95],["03:00",83],["02:30",78],["03:00",82],["03:30",120],["04:00",245],["04:30",131],["05:00",125],["05:30",101],["06:00",209],["06:30",106],["07:00",157],["07:30",168],["08:00",185],["08:30",194],["09:00",171],["09:30",106],["10:00",94],["10:30",93],["11:00",75],["11:30",83],["12:00",93],["12:30",105],["13:00",117],["13:30",112],["14:00",144],["14:30",172],["15:00",156],["15:30",137],["16:00",96],["16:30",81],["17:00",82],["17:30",103],["18:00",117],["18:30",121],["19:00",191],["19:30",84],["20:00",89],["20:30",98],["21:00",107],["21:30",121],["22:00",141],["22:30",157],["23:00",75],["23:30",80]],l=o.map(function(e){return e[0]}),a=o.map(function(e){return e[1]}),n=i.map(function(e){return e[1]}),s=i.map(function(e){return e[1]*Math.ceil(2*Math.random())}),r={backgroundColor:themeConfig.colors.chartBg,color:["#f87761","#0898fa","#fff"],legend:{textStyle:{color:themeConfig.colors.legendC},top:"10%",data:["电压三相不平衡","电流三相不平衡"]},grid:{right:"3%",top:"20%",left:"5%",bottom:40,containLabel:!0},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:35},{type:"inside",xAxisIndex:[0],start:1,end:35}],title:[{left:"right"}],tooltip:{trigger:"axis",padding:5,formatter:function(e){for(var t='<div class="chartTooltip"><div class="trang blue"></div>用电量<br>',o=0;o<e.length;o++)t+=e[o].seriesName+e[o].axisValue+'<p class="val">'+e[o].value+"</p>";return t+="</div>"}},xAxis:{axisLabel:{color:themeConfig.colors.xAxisLabelC},axisLine:{lineStyle:{color:themeConfig.colors.axisLineC}},data:l},yAxis:[],series:[{name:"电压三相不平衡",type:"line",showSymbol:!1,itemStyle:{color:"#f87761"},lineStyle:{color:"#f87761",width:3},data:a},{name:"电流三相不平衡",yAxisIndex:1,type:"line",showSymbol:!1,itemStyle:{color:"#b6c604"},lineStyle:{color:"#b6c604",width:3},data:n}]},c=JSON.parse(JSON.stringify(r));c.yAxis=[{name:"单位:kv",type:"value",position:"left",nameTextStyle:{color:themeConfig.colors.legendC},axisLine:{show:!1,lineStyle:{color:themeConfig.colors.axisLineC}},axisLabel:{color:themeConfig.colors.yAxisLabelC},splitLine:{show:!0,lineStyle:{color:themeConfig.colors.axisLineC}}},{name:"单位:A",type:"value",show:!1,position:"right",nameTextStyle:{color:themeConfig.colors.legendC},axisLine:{show:!1,lineStyle:{color:themeConfig.colors.axisLineC}},axisLabel:{color:themeConfig.colors.yAxisLabelC},splitLine:{show:!0,lineStyle:{color:themeConfig.colors.axisLineC}}}],c.grid.right="8%",t.setOption(c);for(var A=[],m=0;m<a.length;m++)A.push(e(a));var d=JSON.parse(JSON.stringify(r));d.color=["#f55b99","#f5f6f9"],d.legend.data=["线损"],d.yAxis.name="单位：kV",d.toolbox={feature:{saveAsImage:{icon:"image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAA1ElEQVQoz8WRrQoCURCFvyusYDGv2PxpJsGmIGI2+SJbfRCD+BIiZotGMQmmQYNs2qZpwLXccLnqrmxxyoVz5puZw4VvpTJDZUtGlTK8HjAsCifAoyicW/+GVdqodHO7VUJUev7mEXBAZeK0Gg+sADGw8OElsAZWqPQdr+zgV/tOv521RyVFpYpKhMrF6kerN91282HAGWgCG6AG3G2sDkHjlAeXgBsQOuqAoLH77Q9Uyqgk9tTxb9D7kHqWbVCJgAB4el5s87a8eAZIgb1BJS12FvMX6IdPNWzTtmsAAAAASUVORK5CYII=",title:" "}},top:"5%",right:"3%"},d.yAxis=[{name:"单位:kv",type:"value",nameTextStyle:{color:themeConfig.colors.legendC},axisLine:{show:!1,lineStyle:{color:themeConfig.colors.axisLineC}},axisLabel:{color:themeConfig.colors.yAxisLabelC},splitLine:{show:!0,lineStyle:{color:themeConfig.colors.axisLineC}}}],d.tooltip={trigger:"axis",padding:0,formatter:function(e){var t='<div class="chartTooltip"><div class="trang blue"></div>';return t+=e[1].seriesName+e[1].axisValue+'<p class="val">'+e[1].value+"</p>",t+="</div>"}},d.series=[{type:"bar",itemStyle:{normal:{color:"rgba(255,255,255,0.05)"}},barGap:"-100%",barCategoryGap:"40%",data:A,animation:!1},{name:"线损",type:"bar",showSymbol:!1,lineStyle:{color:"#f55b99"},itemStyle:{color:"#f55b99"},data:a}];var g=echarts.init(document.getElementById("chart_2"));g.setOption(d);var y=JSON.parse(JSON.stringify(r));y.color=["#0099ff","#fff"],y.legend.data=["标准功率因数","实际功率因数"],y.yAxis.name="单位：kw",y.toolbox={feature:{saveAsImage:{icon:"image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAA1ElEQVQoz8WRrQoCURCFvyusYDGv2PxpJsGmIGI2+SJbfRCD+BIiZotGMQmmQYNs2qZpwLXccLnqrmxxyoVz5puZw4VvpTJDZUtGlTK8HjAsCifAoyicW/+GVdqodHO7VUJUev7mEXBAZeK0Gg+sADGw8OElsAZWqPQdr+zgV/tOv521RyVFpYpKhMrF6kerN91282HAGWgCG6AG3G2sDkHjlAeXgBsQOuqAoLH77Q9Uyqgk9tTxb9D7kHqWbVCJgAB4el5s87a8eAZIgb1BJS12FvMX6IdPNWzTtmsAAAAASUVORK5CYII=",title:" "}},top:"5%",right:"3%"},y.yAxis=[{name:"单位:KW",type:"value",nameTextStyle:{color:themeConfig.colors.legendC},axisLine:{show:!1,lineStyle:{color:themeConfig.colors.axisLineC}},axisLabel:{color:themeConfig.colors.yAxisLabelC},splitLine:{show:!0,lineStyle:{color:themeConfig.colors.axisLineC}}}],y.tooltip={trigger:"axis",padding:0,formatter:function(e){for(var t='<div class="chartTooltip"><div class="trang blue"></div>',o=0;o<e.length;o++)t+=e[o].seriesName+e[o].axisValue+'<p class="val">'+e[o].value+"</p>";return t+="</div>"}},y.series=[{name:"标准功率因数",type:"line",showSymbol:!1,itemStyle:{color:"#00aaff"},lineStyle:{color:"#00aaff",width:3},data:n},{name:"实际功率因数",type:"line",showSymbol:!1,itemStyle:{color:"#069787"},lineStyle:{color:"#069787",width:3},data:a}];var h=echarts.init(document.getElementById("chart_3"));h.setOption(y);var f=JSON.parse(JSON.stringify(r));f.color=["#bac10a"],f.legend={textStyle:{color:themeConfig.colors.legendC},top:"20%",data:["谐波"]},f.grid={right:"3%",top:"30%",left:"5%",bottom:40,containLabel:!0},f.xAxis.data=l,f.yAxis.name="单位：kw",f.yAxis=[{name:"谐波：kwh",type:"value",nameTextStyle:{color:themeConfig.colors.legendC},axisLine:{show:!1,lineStyle:{color:themeConfig.colors.axisLineC}},axisLabel:{color:themeConfig.colors.yAxisLabelC},splitLine:{show:!0,lineStyle:{color:themeConfig.colors.axisLineC}}}],f.title={text:"当前正相谐波总电能",fontSize:16,left:30,top:26,textStyle:{color:"#fff"}},f.tooltip={trigger:"axis",padding:0,formatter:function(e){for(var t='<div class="chartTooltip"><div class="trang blue"></div>',o=0;o<e.length;o++)t+='<p class="val">'+e[o].value+"</p>"+e[o].axisValue;return t+="</div>"}},f.series=[{name:"谐波",type:"line",itemStyle:{color:"#00b4cd"},lineStyle:{width:3},smooth:!0,symbolSize:8,areaStyle:{normal:{type:"default",color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#00b4cd"},{offset:1,color:"rgba(0,0,0,.5)"}],!1)}},data:a}];var x=echarts.init(document.getElementById("chart_4"));x.setOption(f);var C=JSON.parse(JSON.stringify(r));C.color=["#bac10a"],C.legend={textStyle:{color:themeConfig.colors.legendC},top:"20%",data:["A相电流","B相电流","C相电流"]},C.grid={right:"3%",top:"30%",left:"5%",bottom:40,containLabel:!0},C.xAxis.data=l,C.yAxis=[{name:"电流谐波（%）",type:"value",min:0,max:500,nameTextStyle:{color:themeConfig.colors.legendC},axisLine:{show:!1,lineStyle:{color:themeConfig.colors.axisLineC}},axisLabel:{color:themeConfig.colors.yAxisLabelC},splitLine:{show:!0,lineStyle:{color:themeConfig.colors.axisLineC}}},{name:"电流（A）",type:"value",min:0,max:500,nameTextStyle:{color:themeConfig.colors.legendC},axisLine:{show:!1,lineStyle:{color:themeConfig.colors.axisLineC}},axisLabel:{color:themeConfig.colors.yAxisLabelC},splitLine:{show:!0,lineStyle:{color:themeConfig.colors.axisLineC}}}],C.title={text:"A、B、C相电流总谐波含量",fontSize:16,left:30,top:26,textStyle:{color:"#fff"}},C.tooltip={trigger:"axis",padding:0,formatter:function(e){for(var t='<div class="chartTooltip"><div class="trang blue"></div>',o=0;o<e.length;o++)t+=e[o].seriesName+e[o].axisValue+'<p class="val">'+e[o].value+"</p>";return t+="</div>"}},C.series=[{name:"A相电流",type:"line",yAxisIndex:1,showSymbol:!1,itemStyle:{color:"#587ef5"},lineStyle:{color:"#587ef5",width:3},data:a},{name:"B相电流",type:"line",yAxisIndex:1,showSymbol:!1,itemStyle:{color:"#fc9208"},lineStyle:{color:"#fc9208",width:3},data:n},{name:"C相电流",type:"line",yAxisIndex:1,showSymbol:!1,itemStyle:{color:"#5cb460"},lineStyle:{color:"#5cb460",width:3},data:s}];var p=echarts.init(document.getElementById("chart_5"));p.setOption(C);var S=JSON.parse(JSON.stringify(r));S.color=["#f1752b","#2bf163"],S.legend={textStyle:{color:themeConfig.colors.legendC},top:"20%",data:["A相电压","B相电压","C相电压"]},S.xAxis.data=l,S.yAxis=[{name:"谐波：kwh",type:"value",min:0,max:300,nameTextStyle:{color:themeConfig.colors.legendC},axisLine:{show:!1,lineStyle:{color:themeConfig.colors.axisLineC}},axisLabel:{color:themeConfig.colors.yAxisLabelC},splitLine:{show:!0,lineStyle:{color:themeConfig.colors.axisLineC}}},{name:"电压（kv）",type:"value",min:0,max:300,nameTextStyle:{color:themeConfig.colors.legendC},axisLine:{show:!1,lineStyle:{color:themeConfig.colors.axisLineC}},axisLabel:{color:themeConfig.colors.yAxisLabelC},splitLine:{show:!0,lineStyle:{color:themeConfig.colors.axisLineC}}}],S.title={text:"A、B、C相电压总谐波含量",fontSize:16,left:30,top:26,textStyle:{color:"#fff"}},S.tooltip={trigger:"axis",padding:0,formatter:function(e){for(var t='<div class="chartTooltip"><div class="trang blue"></div>',o=0;o<e.length;o++)t+=e[o].seriesName+e[o].axisValue+'<p class="val">'+e[o].value+"</p>";return t+="</div>"}},S.grid={right:"3%",top:"30%",left:"5%",bottom:40,containLabel:!0},S.series=[{name:"A相电压",type:"line",showSymbol:!1,itemStyle:{color:"#5cb460"},lineStyle:{color:"#5cb460",width:3},yAxisIndex:1,data:[20,30,35,36,38,40,47,50,50,53,46,50,54,52,53,50,54,57,58,58,60,60,64,68,69,70,72,71,73,74,76,72,78,74,72,70,69,68,68,67,69,71,69,72,77,74,78,79,75,70]},{name:"B相电压",type:"line",showSymbol:!1,itemStyle:{color:"#db6a33"},lineStyle:{color:"#db6a33",width:3},yAxisIndex:1,data:[24,33,36,37,39,42,48,52,53,55,48,53,56,56,55,56,57,59,60,61,61,62,65,69,70,72,73,73,75,76,78,73,79,79,80,72,73,74,70,68,72,73,72,71,78,75,78,80,77,73]},{name:"C相电压",type:"line",showSymbol:!1,itemStyle:{color:"#95b9e3"},lineStyle:{color:"#95b9e3",width:3},yAxisIndex:1,data:[44,53,96,67,59,92,88,42,33,55,58,33,56,68,75,96,67,79,90,81,71,42,45,69,80,92,113,123,85,96,138,163,179,149,130,112,93,74,70,138,132,133,132,71,178,175,178,180,177,173]}];var u=echarts.init(document.getElementById("chart_6"));function b(){t.resize(),g.resize(),h.resize(),x.resize(),p.resize(),u.resize()}u.setOption(S),layui.use("laydate",function(){layui.laydate.render({elem:"#Customize",theme:"#07c3a9",type:"datetime",range:!0,done:function(e){var t=e.split(" - ");ajaxStime=t[0],ajaxEtime=t[1]}})}),$("#timeRange").on("click",function(){$(this).is(":checked")?$(".select-date").removeClass("tchide"):$(".select-date").addClass("tchide")}),$('input[name="acheck"]').on("change",function(){var e=$(this).data("datetype");switch("custom"!=e&&$(".select-date").addClass("tchide"),e){case"hours":case"day":case"month":case"year":break;case"custom":$(this).parents(".radio-im").siblings("label").children("input").prop("checked",!1)}}),$("#queryBtn").on("click",function(){var e;""==$("#Customize").val()&&(e="请选择日期",layui.use("layer",function(){layui.layer.msg(e)}))}),$("#menuTree").contextMenu({selector:"a",items:{firstCommand:{name:"选择",icon:"select",className:"contextmenu-select",callback:function(e,t,o){$(".on").removeClass("on"),$(this).addClass("on"),nodeId=$(this).data("menuid")}}}}),window.addEventListener("resize",function(){b()}),$("#listenInput").on("blur change",function(){setTimeout(function(){b()},300)})});