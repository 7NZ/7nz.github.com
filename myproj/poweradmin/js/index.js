$(function(){var e={axisLineC:"#ebeef0",xAxisLabelC:"#99a8bf",yAxisLabelC:"#4a4b56"};$(".stats .stats-div").on("click",".icon",function(){var e=$(this).parents(".icon-box").next(".cont").find(".sz"),t=e.text();e.attr("data-type");layui.use("layer",function(){var s=layui.layer;s.ready(function(){s.prompt({formType:2,skin:"layer-dialog promp-wrap",value:t,title:"请输入值"},function(e,t,a,i){if(!/^[1-9]\d*$/.test(e))return s.msg("请输入正整数"),!1})})})});var t=echarts.init(document.getElementById("gauge"));t.setOption({toolbox:{show:!1,feature:{mark:{show:!0},restore:{show:!0},saveAsImage:{show:!0}}},series:[{name:"指标",type:"gauge",startAngle:200,endAngle:-21,center:["50%","57%"],radius:"86%",axisLine:{lineStyle:{width:10,color:[[.698,"#2d99e2"],[1,"#dce3ec"]]}},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1},pointer:{width:5,length:"60%",color:"#2d99e2"},title:{show:!0,offsetCenter:[0,"-50%"],textStyle:{color:"#333",fontSize:24,fontFamily:"微软雅黑"}},detail:{show:!1},data:[{value:60,name:"正常"}]}]});var a=echarts.init(document.getElementById("chart_kwh")),i={dataZoom:[{type:"slider",start:0,end:100},{type:"inside",start:0,end:100}],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{data:["10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30"],boundaryGap:!1,axisLine:{show:!1,lineStyle:{color:e.axisLineC}},axisLabel:{textStyle:{color:e.xAxisLabelC,fontSize:10}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:e.axisLineC}}},yAxis:[{name:"实时功率kw/h",type:"value",nameTextStyle:{color:"#333"},splitLine:{show:!1},axisLine:{lineStyle:{color:e.axisLineC}},axisLabel:{color:e.yAxisLabelC}}],series:[{type:"line",color:"#4b8bf4",showSymbol:!1,lineStyle:{normal:{width:3}},label:{normal:{show:!1,position:"top",color:"#000"}},smooth:!0,data:[1e3,2e3,1400,1200,1800,1500,1700,1300]}]};a.setOption(i);var s=echarts.init(document.getElementById("chart_4item")),r={dataZoom:[{type:"slider",start:0,end:100},{type:"inside",start:0,end:100}],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{align:"right",right:26,top:26,itemWidth:6,itemHeight:5,data:["电","气","热","水"]},yAxis:{type:"value",splitLine:{show:!1},axisLine:{lineStyle:{color:e.axisLineC}},axisLabel:{color:e.yAxisLabelC},max:function(e){return e.max+500}},xAxis:{type:"category",axisLabel:{color:e.xAxisLabelC},axisLine:{lineStyle:{color:e.axisLineC}},splitLine:{show:!0,lineStyle:{color:e.axisLineC}},data:["一月","二月","三月","四月","五月"]},series:[{name:"电",type:"bar",barWidth:30,stack:"总量",color:["#0099ff"],data:[100,130,120,160,180,150]},{name:"气",type:"bar",barWidth:30,stack:"总量",color:["#33adff"],data:[190,160,170,180,150,180]},{name:"热",type:"bar",barWidth:30,stack:"总量",color:["#66c2ff"],data:[200,180,120,160,170,140]},{name:"水",type:"bar",barWidth:30,stack:"总量",color:["#99d6ff"],data:[190,150,140,160,190,180]}]};s.setOption(r);var n=echarts.init(document.getElementById("electric_usage"));data=[["00:00",116],["00:30",129],["01:00",135],["01:30",86],["02:00",73],["02:30",85],["03:00",73],["02:30",68],["03:00",92],["03:30",130],["04:00",245],["04:30",139],["05:00",115],["05:30",111],["06:00",309],["06:30",206],["07:00",137],["07:30",128],["08:00",85],["08:30",94],["09:00",71],["09:30",106],["10:00",84],["10:30",93],["11:00",85],["11:30",73],["12:00",83],["12:30",125],["13:00",107],["13:30",82],["14:00",44],["14:30",72],["15:00",106],["15:30",107],["16:00",66],["16:30",91],["17:00",92],["17:30",113],["18:00",107],["18:30",131],["19:00",111],["19:30",64],["20:00",69],["20:30",88],["21:00",77],["21:30",83],["22:00",111],["22:30",57],["23:00",55],["23:30",60]],data2=[["00:00",106],["00:30",120],["01:00",125],["01:30",116],["02:00",173],["02:30",95],["03:00",83],["02:30",78],["03:00",82],["03:30",120],["04:00",225],["04:30",131],["05:00",125],["05:30",101],["06:00",209],["06:30",106],["07:00",157],["07:30",168],["08:00",185],["08:30",194],["09:00",171],["09:30",106],["10:00",94],["10:30",93],["11:00",75],["11:30",83],["12:00",93],["12:30",105],["13:00",117],["13:30",112],["14:00",144],["14:30",172],["15:00",156],["15:30",137],["16:00",96],["16:30",81],["17:00",82],["17:30",103],["18:00",117],["18:30",121],["19:00",91],["19:30",84],["20:00",89],["20:30",98],["21:00",107],["21:30",121],["22:00",141],["22:30",157],["23:00",75],["23:30",80]];var o=data.map(function(e){return e[0]}),l=data.map(function(e){return e[1]}),c=data2.map(function(e){return e[1]}),d={color:["#f87761","#0099FF"],legend:{align:"right",right:20,data:["今日","昨日"]},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:35},{type:"inside",xAxisIndex:[0],start:1,end:35}],title:[{left:"right"}],tooltip:{trigger:"axis",padding:0,formatter:function(e){for(var t='<div class="chartTooltip"><div class="trang"></div>用电量<br>',a=0;a<e.length;a++)t+=e[a].seriesName+e[a].axisValue+'<p class="val">'+e[a].value+"</p>";return t+="</div>"}},xAxis:[{axisLabel:{color:e.xAxisLabelC},axisLine:{lineStyle:{color:e.axisLineC}},data:o}],yAxis:[{axisLine:{show:!1,lineStyle:{color:e.axisLineC}},axisLabel:{color:e.yAxisLabelC},splitLine:{show:!0,lineStyle:{color:e.axisLineC}}}],series:[{name:"今日",type:"line",showSymbol:!1,lineStyle:{width:3},areaStyle:{normal:{type:"default",color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#f87761"},{offset:1,color:"#fffefe"}],!1)}},data:l},{name:"昨日",type:"line",showSymbol:!1,lineStyle:{width:3},data:c}]};function x(e,a,i,s){e.each(function(e){var t=$(this);switch(e){case 0:t.find(".layui-progress-bar").css("width",a.nowPercent+"%"),t.children(".bar").children("p").text(i),t.children(".unit").html(a.thisrated+"KW/h");break;case 1:t.find(".layui-progress-bar").css("width",a.lastPercent+"%"),t.children(".bar").children("p").text(s),t.children(".unit").html(a.lastrated+"KW/h");break;case 2:t.find(".layui-progress-bar").css("width",a.comparePerc+"%"),t.children(".unit").html("<p>"+a.comparePerc+'%<i class="iconfont icon-arr"></i></p>'+a.decres+"KW/h")}})}n.setOption(d),$("#index_usage_tab").on("click","li",function(){var e=$(this).index();switch($(this).addClass("on").siblings().removeClass("on"),e){case 1:n.setOption({legend:{data:["本周","上周"]},xAxis:{data:["周一","周二","周三","周四","周五","周六","周日"]},series:[{name:"本周",data:[642,502,421,523,60,754,705]},{name:"上周",data:[742,552,481,513,673,714,621]}]});var t={nowPercent:50,thisrated:200,lastPercent:40,lastrated:100,comparePerc:60,decres:89};x($(".elec-progress .elec-progress-im"),t,"本周用电","上周用电");break;case 2:n.setOption({legend:{data:["本月","上月"]},tooltip:{trigger:"axis",padding:0,formatter:function(e){for(var t='<div class="chartTooltip"><div class="trang"></div>用电量<br>',a=0;a<e.length;a++)t+=e[a].seriesName+e[a].axisValue+'号<p class="val">'+e[a].value+"</p>";return t+="</div>"}},xAxis:{data:["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"]},series:[{name:"本月",data:[1642,1542,1602,1512,1712,1967,1883,1723,1612,1521,1687,1639,1744,1752,1719,1693,1813,1921,1901,1892,1834,1753,1712,1632,1637,1689,1653,1421,1633,1742]},{name:"上月",data:[1742,1491,1621,1212,1672,1748,1641,1496,1534,1731,1812,1731,1691,1823,1872,1812,1631,1721,1801,1672,1748,1641,1496,1545,1709,1843,1903,1421,1633,1742]}]});t={nowPercent:62,thisrated:785,lastPercent:36,lastrated:690,comparePerc:20,decres:127};x($(".elec-progress .elec-progress-im"),t,"本月用电","上月用电");break;default:n.setOption(d);t={nowPercent:30,thisrated:90,lastPercent:20,lastrated:80,comparePerc:10,decres:10};x($(".elec-progress .elec-progress-im"),t,"当日用电","昨日用电")}});var h=echarts.init(document.getElementById("electric_view")),p={color:"#4b8bf4",legend:{align:"right",right:20,data:["电量"]},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:50},{type:"inside",xAxisIndex:[0],start:1,end:50}],title:{left:"right"},tooltip:{trigger:"axis",padding:0,axisPointer:{type:"shadow"}},xAxis:{boundaryGap:!1,axisLabel:{color:e.xAxisLabelC},axisLine:{lineStyle:{color:e.axisLineC}},splitLine:{show:!0,lineStyle:{color:e.axisLineC}},data:o},yAxis:{type:"value",axisLabel:{color:"#333"},axisLine:{lineStyle:{color:e.axisLineC}},splitLine:{show:!1,lineStyle:{color:e.axisLineC}}},series:[{name:"电量",type:"line",showSymbol:!1,smooth:!0,lineStyle:{color:"#4b8bf4",width:3},areaStyle:{normal:{type:"default",color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(75, 139, 244, 0.5)"},{offset:1,color:"rgba(255, 255, 255, 0)"}],!1)}},data:l}]};function y(){t.resize(),a.resize(),s.resize(),n.resize(),h.resize()}h.setOption(p),$("#index_view_tab").on("click","li",function(){var e=$(this).index();switch($(this).addClass("on").siblings().removeClass("on"),e){case 1:h.setOption({xAxis:{data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},series:{data:["1842","1802","2021","1923","1803","1954","2105","2240","2180","1958","1864","1896"]}});break;case 2:h.setOption({xAxis:{data:["2011","2012","2013","2014","2015","2106","2017","2018"]},series:{data:["21842","24802","26021","27923","26503","25954","24105","25240"]}});break;default:h.setOption(p)}}),window.addEventListener("resize",function(){y()}),$("#listenInput").on("blur change",function(){setTimeout(function(){y()},300)})});