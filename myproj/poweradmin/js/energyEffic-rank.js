for(var nodeId=0,ajaxStime="",ajaxEtime="",themeConfig={colors:{chartBg:"transparent",axisLineC:"#ebeef0",xAxisLabelC:"#99a8bf",yAxisLabelC:"#4a4b56",legendC:"#333",legendC2:"#646487"}},MonitoringPointChart=echarts.init(document.getElementById("MonitoringPointChart")),dataList=["混料机","磨粉机","水泵房","混料机"],valueList=[500,600,800,900],maxData=valueList[0],i=1;i<valueList.length;i++){var cur=valueList[i];maxData<cur&&(maxData=cur)}var dataShadow=[];for(i=0;i<valueList.length;i++)dataShadow.push(maxData);var option={backgroundColor:themeConfig.colors.chartBg,color:["#f87761","#02ffed"],title:[{left:"right"}],tooltip:{trigger:"axis",padding:0,formatter:function(e){var a='<div class="chartTooltip"><div class="trang blue"></div>';return a+=e[1].name+"："+e[1].value+"KV<br/>",a+="</div>"}},xAxis:{axisLabel:{color:themeConfig.colors.xAxisLabelC},axisLine:{lineStyle:{color:themeConfig.colors.axisLineC}},splitLine:{show:!0,lineStyle:{color:themeConfig.colors.axisLineC}}},yAxis:{name:"单位:kWh",nameTextStyle:{color:themeConfig.colors.legendC},axisLine:{show:!1,lineStyle:{color:themeConfig.colors.axisLineC}},axisLabel:{color:themeConfig.colors.yAxisLabelC},data:dataList},series:[{type:"bar",itemStyle:{normal:{color:"rgba(255,255,255,0.05)"}},barGap:"-100%",barCategoryGap:"40%",data:dataShadow,animation:!1},{name:"能耗组",type:"bar",itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#ffd200"},{offset:1,color:"#ff8700"}])}},data:valueList}]};MonitoringPointChart.setOption(option);var energyEfficChart2=echarts.init(document.getElementById("energyEffic-Chart2")),energyEfficoption={backgroundColor:themeConfig.colors.chartBg,color:["#f87761","#02ffed"],title:{text:"动力组",left:72,textStyle:{color:themeConfig.colors.legendC}},tooltip:{trigger:"axis",padding:0,formatter:function(e){console.log(e);var a='<div class="chartTooltip"><div class="trang blue"></div>';return a+=e[1].name+"："+e[1].value+"KV<br/>",a+="</div>"}},xAxis:[{axisLabel:{color:themeConfig.colors.xAxisLabelC},axisLine:{lineStyle:{color:themeConfig.colors.axisLineC}},splitLine:{show:!0,lineStyle:{color:themeConfig.colors.axisLineC}}}],yAxis:[{name:"单位:kWh",nameTextStyle:{color:themeConfig.colors.legendC},axisLine:{show:!1,lineStyle:{color:themeConfig.colors.axisLineC}},axisLabel:{color:themeConfig.colors.yAxisLabelC},data:dataList}],series:[{type:"bar",itemStyle:{normal:{color:"rgba(255,255,255,0.05)"}},barGap:"-100%",barCategoryGap:"40%",data:dataShadow,animation:!1},{name:"自定义能耗组",type:"bar",itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#3cc4f4"},{offset:1,color:"#1f74f1"}])}},data:valueList}]};function showMsg(e){layui.use("layer",function(){layui.layer.msg(e)})}function chartNoData(e,a){$(e).append('<div class="chart-nodata bg-transparent" style="position:absolute"><div class="table-box"><div class="table-cell"><p class="chart-tip">暂无数据</p></div></div></div>'),a.setOption({xAxis:{data:[]},yAxis:{data:[]},series:[{data:[]},{data:[]}]}),a.hideLoading()}function getPowerRank(e,a,t,i,o){$("#MonitoringPointChart").find(".chart-nodata").remove(),MonitoringPointChart.showLoading(),null==i&&(i=""),null==o&&(o=""),getData({url:apiRoot+"/api/web/ranking/rankingTopTen",token:TOKEN,data:{nodeId:e,dateModel:a,energyModel:t,startTime:i,endTime:o}},function(e){if(200===e.code){var a=e.data;if(null!=a&&0!==a.length&&a[0]){var i={yaixArr:[],valArr:[]};a.forEach(function(e,a,t){i.yaixArr.push(e.nodeName),i.valArr.push(e.D_VALUE)});for(var t=Math.max.apply(null,i.valArr),o=[],n=0;n<i.valArr.length;n++)o.push(t);option.yAxis.data=i.yaixArr,option.series[0].data=o,option.series[1].data=i.valArr,MonitoringPointChart.setOption(option,!0),MonitoringPointChart.hideLoading()}else chartNoData("#MonitoringPointChart",MonitoringPointChart)}})}function getPowerGroup(){getData({request:"POST",url:apiRoot+"/api/web/electroparam/energygroup",token:TOKEN},function(e){if(200===e.code){var a=e.data;if(null==a||0===a.length)chartNoData("#energyEffic-Chart2",energyEfficChart2);else getCustomPowerRank(a[0].id,1,5)}})}function getCustomPowerRank(e,a,t,i,o){$("#energyEffic-Chart2").find(".chart-nodata").remove(),energyEfficChart2.showLoading(),null==i&&(i=""),null==o&&(o=""),getData({url:apiRoot+"/api/web/ranking/rankingCustom",token:TOKEN,data:{energyGroupId:e,dateModel:a,energyModel:t,startTime:i,endTime:o}},function(e){if(console.log("能效排名自定义",e),200===e.code){var a=e.data;if(null!=a&&0!==a.length&&a[0]){var i={yaixArr:[],valArr:[]};a.forEach(function(e,a,t){i.yaixArr.push(e.nodeName),i.valArr.push(e.D_VALUE)});for(var t=Math.max.apply(null,i.valArr),o=[],n=0;n<i.valArr.length;n++)o.push(t);energyEfficoption.yAxis.data=i.yaixArr,energyEfficoption.series[0].data=o,energyEfficoption.series[1].data=i.valArr,energyEfficChart2.setOption(energyEfficoption,!0),energyEfficChart2.hideLoading()}else chartNoData("#energyEffic-Chart2",energyEfficChart2)}})}energyEfficChart2.setOption(energyEfficoption),layui.use("laydate",function(){layui.laydate.render({elem:"#Customize",theme:"#07c3a9",type:"datetime",range:!0,done:function(e){var a=e.split(" - ");ajaxStime=a[0],ajaxEtime=a[1]}})}),$(function(){function e(){MonitoringPointChart.resize(),energyEfficChart2.resize()}$("#energyType").on("click",".layui-btn",function(){$(this).addClass("cur").siblings().removeClass("cur"),$('input[name="acheck2"]').eq(0).prop("checked",!0).siblings().prop("checked",!1),$(this).data("energy")}),$('input[name="acheck2"]').on("change",function(){var e=$("#energyType").find(".cur").data("energy"),a=$(this).data("datetype");function t(e){a}"custom"==a?($(".select-date").removeClass("tchide"),$(this).parents(".radio-im").siblings("label").children("input").prop("checked",!1)):($(".select-date").addClass("tchide"),$('[data-dateType="custom"]').prop("checked",!1)),"elec"==e?t():"heat"==e?t():"water"==e?t():"gas"==e&&t()}),$("#queryBtn").on("click",function(){$("#energyType").find(".cur").data("energy");""==$("#Customize").val()&&showMsg("请选择日期")}),$("#menuTree").contextMenu({selector:"a",items:{firstCommand:{name:"选择",icon:"select",className:"contextmenu-select",callback:function(e,a,t){$(".on").removeClass("on"),$(this).addClass("on"),nodeId=$(this).data("menuid")}}}}),window.addEventListener("resize",function(){e()}),$("#listenInput").on("blur change",function(){setTimeout(function(){e()},300)})});