$(document).ready(function(){var a="",n="";layui.use(["laydate","layer"],function(){var e=layui.laydate;lay(".time-range").each(function(){e.render({elem:this,type:"datetime",format:"yyyy-MM-dd HH:mm",isInitValue:!0,range:!0,done:function(e){var t=e.split(" - ");a=t[0],n=t[1]}})})});var e={colors:{chartBg:"transparent",axisLineC:"#ebeef0",xAxisLabelC:"#99a8bf",yAxisLabelC:"#4a4b56",legendC:"#333",legendC2:"#646487"}},t=[["00:00",116],["00:30",129],["01:00",135],["01:30",86],["02:00",73],["02:30",85],["03:00",73],["02:30",68],["03:00",92],["03:30",130],["04:00",245],["04:30",139],["05:00",115],["05:30",111],["06:00",309],["06:30",206],["07:00",137],["07:30",128],["08:00",85],["08:30",94],["09:00",71],["09:30",106],["10:00",84],["10:30",93],["11:00",85],["11:30",73],["12:00",83],["12:30",125],["13:00",107],["13:30",82],["14:00",44],["14:30",72],["15:00",106],["15:30",107],["16:00",66],["16:30",91],["17:00",92],["17:30",113],["18:00",107],["18:30",131],["19:00",111],["19:30",64],["20:00",69],["20:30",88],["21:00",77],["21:30",83],["22:00",111],["22:30",57],["23:00",55],["23:30",60]],i=[["00:00",106],["00:30",120],["01:00",125],["01:30",116],["02:00",173],["02:30",95],["03:00",83],["02:30",78],["03:00",82],["03:30",120],["04:00",225],["04:30",131],["05:00",125],["05:30",101],["06:00",209],["06:30",106],["07:00",157],["07:30",168],["08:00",185],["08:30",194],["09:00",171],["09:30",106],["10:00",94],["10:30",93],["11:00",75],["11:30",83],["12:00",93],["12:30",105],["13:00",117],["13:30",112],["14:00",144],["14:30",172],["15:00",156],["15:30",137],["16:00",96],["16:30",81],["17:00",82],["17:30",103],["18:00",117],["18:30",121],["19:00",91],["19:30",84],["20:00",89],["20:30",98],["21:00",107],["21:30",121],["22:00",141],["22:30",157],["23:00",75],["23:30",80]],l=t.map(function(e){return e[0]}),r=t.map(function(e){return e[1]}),o=i.map(function(e){return e[1]}),s=(i.map(function(e){return e[1]*Math.ceil(2*Math.random())}),[{month:1,value:2496},{month:2,value:3078},{month:3,value:2363},{month:4,value:2728},{month:5,value:3683},{month:6,value:2576},{month:7,value:2772},{month:8,value:2483},{month:9,value:2654},{month:10,value:2891},{month:11,value:2420},{month:12,value:2526}]),c=[{year:2010,value:23172},{year:2011,value:24966},{year:2012,value:23542},{year:2013,value:24324},{year:2014,value:31324},{year:2015,value:35122},{year:2016,value:28266},{year:2017,value:30772},{year:2018,value:30483}],m=(s.map(function(e){return e.month}),s.map(function(e){return e.value}),c.map(function(e){return e.year}),c.map(function(e){return e.value}),echarts.init(document.getElementById("chart_1"))),u={backgroundColor:e.colors.chartBg,color:["#f4552b"],title:{left:"left",text:"电压",textStyle:{color:e.colors.legendC}},legend:{show:!1,textStyle:{color:e.colors.legendC2}},tooltip:{trigger:"axis",padding:5},xAxis:{axisLabel:{color:e.colors.xAxisLabelC2},axisLine:{lineStyle:{color:e.colors.axisLineC}},data:l},yAxis:{name:"单位：kv",nameTextStyle:{color:e.colors.legendC},axisLine:{show:!1,lineStyle:{color:e.colors.axisLineC}},axisLabel:{color:e.colors.yAxisLabelC},splitLine:{show:!0,lineStyle:{color:e.colors.axisLineC}}},series:{name:"电压",type:"line",symbolSize:10,lineStyle:{width:3},data:r}};m.setOption(u);var d=JSON.parse(JSON.stringify(u));d.color=["#a467f3"],d.title.text="电流",d.yAxis.name="单位：A";var h=echarts.init(document.getElementById("chart_2"));h.setOption(d);var y=JSON.parse(JSON.stringify(u));y.color=["#41a2ff"],y.title.text="功率",y.yAxis.name="单位：kWh",y.series={name:"实际功率因数",type:"line",symbolSize:10,lineStyle:{width:3},data:o};var v=echarts.init(document.getElementById("chart_3"));v.setOption(y);var f=JSON.parse(JSON.stringify(u));f.color=["#ff0066"],f.title.text="功率因数",f.yAxis.name="单位：%",f.series={name:"功率因数",type:"line",symbolSize:10,lineStyle:{width:3},data:r};var p=echarts.init(document.getElementById("chart_4"));function x(){m.resize(),h.resize(),v.resize(),p.resize()}p.setOption(f),$("#menuTree").contextMenu({selector:"a",items:{firstCommand:{name:"选择",icon:"select",className:"contextmenu-select",callback:function(e,t,a){$(".on").removeClass("on"),$(this).addClass("on");var n=$(this).data("menuid");n}}}}),echarts.connect([m,h,v,p]),$(".marker-relate .tool-meta").on("click","[name=acheck]",function(){var e=$(this).parent().index();this.checked?$(".charts-wrap .chart-item").eq(e-1).removeClass("tchide"):$(".charts-wrap .chart-item").eq(e-1).addClass("tchide"),x()}),$('input[name="datetype"]').on("change",function(){var e=$("input[name='datetype']:checked").val();switch(e,$(".chart-nodata").remove(),e){case"day":$(".select-date").addClass("tchide"),0;break;case"month":$(".select-date").addClass("tchide"),1;break;case"year":$(".select-date").addClass("tchide"),2;break;case"custom":$(".select-date").removeClass("tchide"),$(".time-range").val(""),n=a="",3}}),$("#btnQuery").on("click",function(){""===a&&""===n&&layer.msg("请先选择时间！")}),window.addEventListener("resize",function(){x()}),$("#listenInput").on("blur change",function(){setTimeout(function(){x()},300)})});